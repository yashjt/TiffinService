<%- include('partials/header') %>

    <div class="container my-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1>Order Details</h1>
            <a href="/order-history" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Back to Order History
            </a>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <div class="row">
                    <div class="col-md-6">
                        <h5 class="mb-0">Order #<%= order._id.toString().slice(-6).toUpperCase() %>
                        </h5>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <span class="badge rounded-pill
                        <% if(order.status === 'Delivered') { %>
                            bg-success
                        <% } else if(order.status === 'Confirmed') { %>
                            bg-primary
                        <% } else if(order.status === 'Cancelled') { %>
                            bg-danger
                        <% } else { %>
                            bg-warning text-dark
                        <% } %>">
                            <%= order.status %>
                        </span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <h5>Order Information</h5>
                        <p><strong>Date:</strong>
                            <%= new Date(order.createdAt).toLocaleString() %>
                        </p>
                        <p><strong>Order ID:</strong>
                            <%= order._id %>
                        </p>
                        <p><strong>Status:</strong>
                            <%= order.status %>
                        </p>
                    </div>
                    <div class="col-md-6">
                        <h5>Delivery Address</h5>
                        <p>
                            <%= order.deliveryAddress %>
                        </p>
                    </div>
                </div>

                <h5>Order Items</h5>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th class="text-center">Quantity</th>
                                <th class="text-end">Price</th>
                                <th class="text-end">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% order.items.forEach(item=> { %>
                                <tr>
                                    <td>
                                        <%= item.name %>
                                    </td>
                                    <td class="text-center">
                                        <%= item.quantity %>
                                    </td>
                                    <td class="text-end">$<%= item.price.toFixed(2) %>
                                    </td>
                                    <td class="text-end">$<%= (item.price * item.quantity).toFixed(2) %>
                                    </td>
                                </tr>
                                <% }); %>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="3" class="text-end"><strong>Grand Total:</strong></td>
                                <td class="text-end"><strong>$<%= order.totalPrice.toFixed(2) %></strong></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>

        <% if(order.status==='Pending' ) { %>
            <div class="alert alert-info">
                <p><i class="bi bi-info-circle"></i> Your order is currently being processed. We will update you when
                    it's confirmed.</p>
            </div>
            <% } %>
    </div>

    <%- include('partials/footer') %>